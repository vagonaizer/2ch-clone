<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - vagonach</title>
    <link rel="stylesheet" href="/static/styles/admin.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <div class="admin-page">
        <div class="admin-header">
            <div class="admin-header-left">
                <img src="/static/img/vagonach-logo.png" alt="vagonach" class="admin-logo">
                <div class="admin-title-group">
                    <h1>vagonach</h1>
                    <span class="admin-subtitle">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
                </div>
            </div>
            
            <div class="admin-header-right">
                <nav class="admin-nav">
                    <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="/about">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
                </nav>
                <a href="/admin/logout" class="logout-btn">–í—ã–π—Ç–∏</a>
            </div>
        </div>

        <div class="admin-content">
            <div class="welcome-section">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å!</h2>
                <p>–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –∏ –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∞–π—Ç.</p>
                <p>Debug: Threads count = {{len .Threads}}</p>
            </div>

            <div class="stats-section">
                <div class="stat-card">
                    <div class="stat-number">{{len .Threads}}</div>
                    <div class="stat-label">–í—Å–µ–≥–æ —Ç—Ä–µ–¥–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">10</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –ø–æ—Å—Ç–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">1</div>
                    <div class="stat-label">–û–Ω–ª–∞–π–Ω</div>
                </div>
            </div>

            <div class="management-section">
                <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–¥–∞–º–∏</h2>
                
                {{if .Threads}}
                <div class="table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–ë–æ—Ä–¥–∞</th>
                                <th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
                                <th>–ê–≤—Ç–æ—Ä</th>
                                <th>–î–∞—Ç–∞</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{range .Threads}}
                            <tr>
                                <td class="thread-id">#{{.Thread.ID}}</td>
                                <td class="board-slug">/{{.Thread.BoardSlug}}/</td>
                                <td class="thread-title">
                                    {{if .Thread.Title}}
                                        {{.Thread.Title}}
                                    {{else}}
                                        <em>–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è</em>
                                    {{end}}
                                </td>
                                <td class="thread-author">
                                    {{if .Thread.Author}}
                                        {{.Thread.Author}}
                                    {{else}}
                                        –ê–Ω–æ–Ω–∏–º
                                    {{end}}
                                </td>
                                <td class="thread-date">{{.Thread.CreatedAt.Format "02.01.06 15:04"}}</td>
                                <td class="thread-status">
                                    {{if .Thread.Sticky}}<span class="status-sticky">–ó–∞–∫—Ä–µ–ø–ª–µ–Ω</span>{{end}}
                                    {{if .Thread.Locked}}<span class="status-locked">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</span>{{end}}
                                    {{if not .Thread.Sticky}}{{if not .Thread.Locked}}<span class="status-normal">–û–±—ã—á–Ω—ã–π</span>{{end}}{{end}}
                                </td>
                                <td class="thread-actions">
                                    <div class="action-buttons">
                                        <a href="/threads/{{.Thread.ID}}" target="_blank" class="btn btn-view" title="–û—Ç–∫—Ä—ã—Ç—å —Ç—Ä–µ–¥">üëÅ</a>
                                        
                                        <form method="post" action="/admin/threads/{{.Thread.ID}}/sticky" style="display:inline;">
                                            <button type="submit" class="btn btn-sticky" title="{{if .Thread.Sticky}}–û—Ç–∫—Ä–µ–ø–∏—Ç—å{{else}}–ó–∞–∫—Ä–µ–ø–∏—Ç—å{{end}}">
                                                {{if .Thread.Sticky}}üìå{{else}}üìç{{end}}
                                            </button>
                                        </form>
                                        
                                        <form method="post" action="/admin/threads/{{.Thread.ID}}/lock" style="display:inline;">
                                            <button type="submit" class="btn btn-lock" title="{{if .Thread.Locked}}–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å{{else}}–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å{{end}}">
                                                {{if .Thread.Locked}}üîì{{else}}üîí{{end}}
                                            </button>
                                        </form>
                                        
                                        <form method="post" action="/admin/threads/{{.Thread.ID}}/delete" style="display:inline;">
                                            <button type="submit" class="btn btn-delete" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–¥?')" title="–£–¥–∞–ª–∏—Ç—å">üóë</button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                            {{end}}
                        </tbody>
                    </table>
                </div>
                {{else}}
                <p>–ù–µ—Ç —Ç—Ä–µ–¥–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
                {{end}}
            </div>
        </div>
    </div>
</body>
</html>
